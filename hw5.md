# 🧠 Классы и объектно-ориентированное программирование в TypeScript

## 🎯 Цель

Научиться создавать и использовать классы в TypeScript, применять принципы объектно-ориентированного программирования (ООП): инкапсуляцию, наследование и полиморфизм.

---

## 📦 Задание: Реализация классов для учёта бюджета

В рамках проекта budget-tracker-cli реализуйте классы для управления данными о бюджетах, расходах и доходах.

1. Создайте файл `src/classes.ts`.

2. Реализуйте следующие классы:


### 1. Создайте класс `Transaction`.

- Реализуйет интерфейс `ITransaction`.

- Свойства:
  - `id: number` — уникальный идентификатор транзакции;
  - `amount: number` — сумма транзакции;
  - `type: 'income' | 'expense'` — тип транзакции (доход или расход);
  - `date: string` — дата транзакции (строка в формате ISO);
  - `description: string` — описание транзакции.

- Методы:
  - конструктор для инициализации всех свойств;
  - метод `toString(): string` — возвращает строковое представление транзакции.

---

### 2. Создайте класс `Account`.

- Реализуйет интерфейсы `IAccount` и `ISummary`.

- Свойства:
  - `id: number` — уникальный идентификатор счёта;
  - `name: string` — название счёта;
  - `transactions: Transaction[]` — массив транзакций (инициализируется пустым).

- Геттеры:
  - `income` — общая сумма доходов (число);
  - `expenses` — общая сумма расходов (число);
  - `balance` — текущий баланс (число).

- Методы:
  - конструктор для инициализации `id` и `name`;
  - метод `addTransaction(transaction: Transaction): void` — добавляет транзакцию в счёт;
  - метод `getSummary(): ISummary` — возвращает объект с информацией о балансе (сумма доходов, сумма расходов, общий баланс);
  - метод `getSummaryString(): string` — возвращает строку с краткой информацией о счёте (название, баланс, количество транзакций);
  - метод `toString(): string` — возвращает строковое представление транзакции. Реализуйте строку в **удобном** для пользователя формате.

*Примечание: формат можно выбрать почти любой, но он должен быть удобным для пользователя при использовании приложения.*

<details>
<summary>Примеры строки</summary>

```
1) Личный бюджет
Список транзакций: 
1) Зарплата за январь (доход 1000₽) | 1 января 2025 г.
2) Покупка продуктов (расход 200₽) | 5 января 2025 г.
3) Оплата коммунальных услуг (расход 150₽) | 10 января 2025 г.
```

```
Транзакции личного бюджета:
Транзакция #1: [INCOME] 1000 ₽, Дата: 2023-01-01, Описание: Зарплата
Транзакция #2: [EXPENSE] 200 ₽, Дата: 2023-01-05, Описание: Продукты
Транзакция #3: [EXPENSE] 150 ₽, Дата: 2023-01-10, Описание: Коммунальные услуги
```

Для тех, кто хочет сделать красиво:
```
╔══════╤════════════════════════════════════════════════════════════════════════╗
║  1   |      Личный бюджет                                                     ║
╟──────┼───────────────────────────┬────────────────┬────────┬──────────────────╢
║  id  |         описание          | тип транзакции | сумма  |      дата        ║
╟──────┼───────────────────────────┼────────────────┼────────┼──────────────────╢
║ 1    | Зарплата за январь        |     доход      | 1000₽  | 1 января 2025 г. ║
╟──────┼───────────────────────────┼────────────────┼────────┼──────────────────╢
║ 2    | Покупка продуктов         |     расход     | 200₽   | 5 января 2025 г. ║
╟──────┼───────────────────────────┼────────────────┼────────┼──────────────────╢
║ 3    | Оплата коммунальных услуг |     расход     | 150₽   | 10 января 2025 г.║
╚══════╧═══════════════════════════╧════════════════╧════════╧══════════════════╝
```

</details>

<details>
<summary>Пример плохой строки, как не надо делать</summary>

```
{"id":1,"name":"Личный бюджет","transactions":[{"id":1,"amount":1000,"type":"income","date":"2025-01-01T00:00:00Z","description":"Зарплата за январь"},{"id":2,"amount":200,"type":"expense","date":"2025-01-05T00:00:00Z","description":"Покупка продуктов"},{"id":3,"amount":150,"type":"expense","date":"2025-01-10T00:00:00Z","description":"Оплата коммунальных услуг"}]}
```

</details>

---

### 3. Создайте класс `AccountManager`.

- Реализуйет интерфейсы `IAccountManager` и `ISummary`.

- Свойства:
  - `accounts: Account[]` — массив счётов (инициализируется пустым).

- Геттеры:
  - `income` — общая сумма доходов (число);
  - `expenses` — общая сумма расходов (число);
  - `balance` — текущий баланс (число).

- Методы:
  - метод `addAccount(account: Account): void` — добавляет новый счёт;
  - метод `removeAccountById(accountId: number): boolean;` — удаляет счёт;
  - метод `getAccountById(id: number): Account | undefined` — возвращает счёт по `id` или `undefined`, если не найден;
  - метод `getAllAccounts(): Account[]` — возвращает массив всех счётов;
  - метод `getSummary(): ISummary` — возвращает объект с информацией (название, баланс, количество транзакций) обо всех счетах;
  - метод `getSummaryString(): string` — возвращает строку с краткой информацией о счёте (название, баланс, количество транзакций);
  - метод `toString(): string` — возвращает строковое представление всего бюджета. Реализуйте строку в **удобном** для пользователя формате.

*Примечание: теперь методы работают с типом `Account` вместо интерфейса `IAccount`, поэтому, в интерфесе `IAccountManager` в методах необходимо заменить типы на `Account`.*

3. Проверка решения:

- Экспортируйте все классы из файла `classes.ts`.
- В файле `index.ts` замените решение прошлого задания на решение в ООП стиле.
- Создайте счёт и добавьте в него несколько транзакций.
- Добавьте счёт в объект управления счетов и проверьте работу всех методов.

<details>
<summary>Готовый шаблон для ленивых</summary>

```ts
const personalAccount = new Account(1, 'Личный бюджет');
personalAccount.addTransaction(new Transaction(1, 1000, 'income', '2023-01-01T00:00:00Z', 'Зарплата'));
personalAccount.addTransaction(new Transaction(2, 200, 'expense', '2023-01-05T00:00:00Z', 'Продукты'));
personalAccount.addTransaction(new Transaction(3, 150, 'expense', '2023-01-10T00:00:00Z', 'Коммунальные услуги'));

const manager = new AccountManager();
manager.addAccount(personalAccount);

console.log(String(personalAccount));
console.log(`Общий баланс всех бюджетов: ${manager.balance} ₽`);

console.log('\nТранзакции личного бюджета:');
personalAccount.getTransactions().forEach(t => console.log(t.toString()));
```

</details>

---

## 📁 Структура проекта

```
budget-tracker-cli/
├── src/
│   ├── index.ts
│   ├── calculation-demo.ts
│   ├── functions.ts
│   ├── types.ts
│   └── classes.ts
├── dist/
├── package.json
├── tsconfig.json
└── README.md
```

---

## ✅ Чек-лист самопроверки. Критерии выполнения задания:

- [ ] Все интерфейсы и типы реализованы в файле `src/types.ts`.
- [ ] Все свойства и методы имеют корректные типы.
- [ ] Код компилируется без ошибок.
- [ ] Все интерфейсы и типы имеют понятные и логичные названия.

---